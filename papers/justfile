# Build and clean LaTeX papers
# Usage: just build

# Main build command: create txt copies, compile PDFs, clean up
build: clean-all copy compile clean-temp

# Copy .tex files to .txt
copy:
    for f in *.tex; do cp "$$f" "$${f%.tex}.txt"; done

# Compile PDFs from .tex files with error detection and verbose output
compile:
    for f in *.tex; do \
        echo "Compiling $$f..."; \
        pdflatex -halt-on-error -interaction=nonstopmode -file-line-error "$$f"; \
        if [ $$? -ne 0 ]; then \
            echo "Error compiling $$f"; \
            exit 1; \
        else \
            echo "$$f compiled successfully."; \
        fi; \
        echo ""; \
    done

# Remove all generated files including outputs
clean-all:
    rm -f *.aux *.log *.synctex.gz *.out *.toc *.fls *.fdb_latexmk *.txt *.pdf

# Remove only LaTeX temporary files
clean-temp:
    rm -f *.aux *.log *.synctex.gz *.out *.toc *.fls *.fdb_latexmk